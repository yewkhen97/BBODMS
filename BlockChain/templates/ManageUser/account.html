{% extends "layout.html" %}
{% block content %}
                <div class="container" id="alert">
                      
                </div>

  <div class="wrapper">
      <div class="page-header clear-filter" filter-color="red">
          <div class="page-header-image" data-parallax="true" style="background-image:url('../static/assets/img/header.jpg');">
          </div>
        <div class="container">
          <div class="card">
            <div class="card-body">
              <div class="container emp-profile">
                  <div class="row">
                      <div class="col-md-4">
                          <div class="profile-img">
                              <img src="{{ image_file }}" alt=""/>
                          </div>
                      </div>
                      {% if account %}
                                  {% if account != current_user %}
                                   <div class="col-md-6">
                                    <div class="profile-head">
                                      <div class="col-md-6">
                                        <h4>
                                           {{ account.username }}
                                        </h4>
                                      </div>
                                      <div class="col-md-3">
                                         <h5>
                                            {{ account.job_title }}
                                        </h5>
                                      </div>
                                      <div class="col-md-3">
                                        <span class="badge badge-default">About</span>
                                      </div>
                                    </div>
                                 </div>
                                </div>
                              </div>
                           <hr>
                                    <div class="row">
                                      <div class="col-md-4"> 
                                      </div>
                                      <div class="col-md-8">
                                          <div class="tab-content profile-tab" id="myTabContent">
                                              <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                                                <div class="row">
                                                  <div class="col-md-6">
                                                      <label class="badge badge-default">Name</label>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <p>{{ account.username }}</p>
                                                  </div>
                                              </div>
                                              <div class="row">
                                                   <div class="col-md-6">
                                                      <label>Gender</label>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <p>{{ account.gender }}</p>
                                                  </div>
                                              </div>
                                              <div class="row">
                                                  <div class="col-md-6">
                                                      <label>Email</label>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <p>{{ account.email }}</p>
                                                  </div>
                                              </div>
                                              <div class="row">
                                                   <div class="col-md-6">
                                                      <label>Phone</label>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <p>{{ account.phone_num }}</p>
                                                  </div>
                                              </div>
                                              <div class="row">
                                                   <div class="col-md-6">
                                                      <label>Address</label>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <p>{{ account.address }}</p>
                                                  </div>
                                              </div>
                                              
                                            </div>
                                          </div>
                                      </div>
                                  </div>     
                                   {% endif %}
                      {% else %}
                    <div class="col-md-6">
                        <div class="profile-head">
                          <div class="col-md-4">
                            <h4>
                               {{ current_user.username }}
                            </h4>
                          </div>
                            <div class="col-md-3">
                             <h5>
                                {{ current_user.job_title }}
                            </h5>
                          </div>
                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                                <li class="nav-item">
                                     <a class="btn btn-info " href="/change_password">Change Password</a>
                                </li>
                                 <li class="nav-item">
                                    <a class="btn btn-info " href="/update_account" >Edit Profile</a>
                                </li>
                                <li class="nav-item">
                                    <a class="btn btn-info " id="enroll">Enroll In Network</a>
                                </li>
                            </ul>
                            <div class="col-md-3">
                            <span class="badge badge-default">About</span>
                          </div>
                        </div>
                     </div>
                    </div>
                    <hr>
                    <div class="row">
                                      <div class="col-md-3"> 
                                      </div>
                                      <div class="col-md-8">
                                          <div class="tab-content profile-tab" id="myTabContent">
                                              <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                                                <div class="row">
                                                  <div class="col-md-6">
                                                     <p>Name</p>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <p>{{ current_user.username }}</p>
                                                  </div>
                                              </div>
                                              <div class="row">
                                                   <div class="col-md-6">
                                                      <p>Gender</p>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <p>{{ current_user.gender }}</p>
                                                  </div>
                                              </div>
                                              <div class="row">
                                                  <div class="col-md-6">
                                                      <p>Email</p>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <p>{{ current_user.email }}</p>
                                                  </div>
                                              </div>
                                              <div class="row">
                                                   <div class="col-md-6">
                                                      <p>Phone</p>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <p>{{ current_user.phone_num }}</p>
                                                  </div>
                                              </div>
                                              <div class="row">
                                                   <div class="col-md-6">
                                                      <p>Address</p>
                                                  </div>
                                                  <div class="col-md-6">
                                                      <p>{{ current_user.address }}</p>
                                                  </div>
                                              </div>
                                              
                                            </div>
                                          </div>
                                      </div>
                                  </div>                                                  
                      {% endif %}          
          </div>
        </div>
</div>
            </div>
          </div>
        </div>
      </div>
    </div>
            <script>
              $(document).ready(function(){
                $("#enroll").click(function(){
                  var current_ip = String(window.location.host);
                  $.ajax({
                    type: "POST",
                    url: "{{ url_for('BlockRoute.register_node') }}",
                    contentType: "application/json",
                    data: JSON.stringify({'node': current_ip}),
                    dataType: "json",
                    success: function(response){
                      console.log(response);
                      response_tag = document.getElementById("alert");
                      response_tag.innerHTML = `
                      <div class="alert alert-${ response.category }" role="alert">
                          <div class="container">
                            <strong>${ response.message }</strong>
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                              <span aria-hidden="true">
                               <i class="now-ui-icons">&times;</i>
                              </span>
                            </button>
                          </div>
                        </div>`;
                    },
                    error: function(response){
                      console.log(response);
                    }
                  });
                });
              });
            </script>
{% endblock content %}